import{o as n,c as s,b as a,t,g as e}from"./app.a384575a.js";const l=a("h1",{id:"注意事项"},[a("a",{class:"header-anchor",href:"#注意事项","aria-hidden":"true"},"#"),e(" 注意事项")],-1),p=a("h2",{id:"setup"},[a("a",{class:"header-anchor",href:"#setup","aria-hidden":"true"},"#"),e(" setup")],-1),c=a("p",null,[e("在插件实现的时候，是往最后生成的vue组件中添加"),a("code",null,"有setup标记的script"),e("代码（实际上是前一步，操作的是hoistedTags，有兴趣的可以参考源码）。有以下逻辑：")],-1),o=a("ol",null,[a("li",null,[e("查找是否有setup的script："),a("code",null,"const scriptSetupRE = /<\\s*script[^>]*\\bsetup\\b[^>]*/;"),e("；")]),a("li",null,"如果有的话，会标记该script，然后在该script中引入demo组件（替换字符串）：")],-1),r=a("div",{class:"language-js line-numbers-mode"},[a("div",{class:"highlight-lines"},[a("div",{class:"highlighted"}," "),a("div",{class:"highlighted"}," "),a("br"),a("br"),a("br")]),a("pre",null,[a("code",null,[e("hoistedTags"),a("span",{class:"token punctuation"},"["),e("index"),a("span",{class:"token punctuation"},"]"),e(),a("span",{class:"token operator"},"="),e(" hoistedTags"),a("span",{class:"token punctuation"},"["),e("index"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"replace"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'<\/script>'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"\n  "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("importStr"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},"\n  <\/script>\n"),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br")])],-1),i=a("ol",{start:"3"},[a("li",null,[e("如果没有的话，会在"),a("code",null,"hoistedTags[10000]"),e("的地方构造一个setup的script字符串：")])],-1),u=a("div",{class:"language-js line-numbers-mode"},[a("div",{class:"highlight-lines"},[a("div",{class:"highlighted"}," "),a("div",{class:"highlighted"}," "),a("br"),a("br")]),a("pre",null,[a("code",null,[a("span",{class:"token operator"},"<"),e("script setup"),a("span",{class:"token operator"},">"),e("\n  $"),a("span",{class:"token punctuation"},"{"),e("__demoImports"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"join"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'\\n'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token operator"},"<"),a("span",{class:"token operator"},"/"),e("script"),a("span",{class:"token operator"},">"),e("\n")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),b=a("p",null,[e("基于以上原理，在页面中有demo的情况下，"),a("code",null,"以下情形不支持"),e("：")],-1),k=a("div",{class:"language-vue line-numbers-mode"},[a("div",{class:"highlight-lines"},[a("div",{class:"highlighted"}," "),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{class:"highlighted"}," "),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",null,[a("code",null,[e("// 不支持\n\n{{count}}\n\n"),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),e("script")]),a("span",{class:"token punctuation"},">")]),a("span",{class:"token script"},[a("span",{class:"token language-javascript"},[e("\n"),a("span",{class:"token keyword"},"export"),e(),a("span",{class:"token keyword"},"default"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function"},"setup"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token keyword"},"return"),e(),a("span",{class:"token punctuation"},"{"),e("\n      count"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token number"},"123"),e("\n    "),a("span",{class:"token punctuation"},"}"),e("\n  "),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")])]),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),e("script")]),a("span",{class:"token punctuation"},">")]),e("\n")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br")])],-1),d=a("p",null,[a("strong",null,"解决办法")],-1),g=a("ol",null,[a("li",null,"简单的情况下，可以使用data()替换：")],-1),m=a("div",{class:"language-vue line-numbers-mode"},[a("div",{class:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("div",{class:"highlighted"}," "),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",null,[a("code",null,[e("{{count}}\n\n"),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),e("script")]),a("span",{class:"token punctuation"},">")]),a("span",{class:"token script"},[a("span",{class:"token language-javascript"},[e("\n"),a("span",{class:"token keyword"},"export"),e(),a("span",{class:"token keyword"},"default"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function"},"data"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token keyword"},"return"),e(),a("span",{class:"token punctuation"},"{"),e("\n      count"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token number"},"123"),e("\n    "),a("span",{class:"token punctuation"},"}"),e("\n  "),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")])]),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),e("script")]),a("span",{class:"token punctuation"},">")]),e("\n")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br")])],-1),h=a("ol",{start:"2"},[a("li",null,"还不满足需求的话，尝试下setup script")],-1),v=a("div",{class:"language-vue line-numbers-mode"},[a("div",{class:"highlight-lines"},[a("br"),a("br"),a("div",{class:"highlighted"}," "),a("div",{class:"highlighted"}," "),a("div",{class:"highlighted"}," "),a("br")]),a("pre",null,[a("code",null,[e("{{count2}}\n\n"),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),e("script")]),e(),a("span",{class:"token attr-name"},"setup"),a("span",{class:"token punctuation"},">")]),a("span",{class:"token script"},[a("span",{class:"token language-javascript"},[e("\n"),a("span",{class:"token keyword"},"const"),e(" count2 "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"123"),e("\n")])]),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),e("script")]),a("span",{class:"token punctuation"},">")]),e("\n")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br")])],-1),f=a("p",null,[a("strong",null,"如下所示：")],-1),w={data:()=>({count:123})},j='{"title":"注意事项","description":"","frontmatter":{"sidebarDepth":3},"headers":[{"level":2,"title":"setup","slug":"setup"}],"relativePath":"guide/attention.md","lastUpdated":1627453802582}';const y=Object.assign(w,{setup:function(e){return(e,w)=>(n(),s("div",null,[l,p,c,o,r,i,u,b,k,d,g,m,h,v,f,a("p",null,"解决办法1："+t(e.count),1),a("p",null,"解决办法2："+t(123))]))}});export default y;export{j as __pageData};
